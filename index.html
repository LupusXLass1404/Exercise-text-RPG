<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG冒險</title>
    <link rel="stylesheet" href="/css/style.css">

</head>



<body>
    <div id="start">
        <h2 id="title">RPG</h2>
        <button id="startBnt">Start</button>
        <div id="test"></div>
    </div>

    <div id="main">
        <div id="menu">
            <div id="player">玩家區</div>
        </div>
        <div id="content">
            <div id="text">文字區</div>
            <div id="opts"></div>
            <div id="fightText">戰鬥文字</div>
            <div id="fightImg">戰鬥圖片</div>
            <div id="fightOpts">戰鬥選項</div>
        </div>
    </div>

    <script>

        const Text = {
            start: '<p>在一個遙遠的王國裡，和平的日子即將被一場神秘的威脅打破。一天，勇者阿瑟收到了一封來自皇宮的神秘信件，被國王招見。</p><p>阿瑟穿過宏偉的城牆，踏入皇宮的大廳。國王端坐在金光閃閃的寶座上，面容凝重。他告訴阿瑟，近日城外的一片神秘森林出現了奇異的現象，傳言有一群可怕的怪物正在破壞村莊，居民們深受困擾。</p><p>「勇者阿瑟，我需要你的力量，前往那片森林，找出並討伐這些神秘怪物。你的勇氣和智慧是我們唯一的希望。」國王的聲音中充滿了期待。</p><p>阿瑟點頭答應，知道這將是一場充滿冒險與挑戰的旅程。他準備好了武器，踏上了通向神秘森林的道路。一場未知的冒險即將展開，而勇者阿瑟將成為王國的最後一線防線。</p>',
            start2: '<p>勇者踏出城堡，街道上充滿期待的目光。市民們低語祈禱，繁忙的城市生活與即將展開的冒險在此交匯。</p>',
            street: ['<p>阿瑟站在熙熙攘攘的街道，人群匆忙而熱情。</p>'],
            shop: ['充滿金屬香氣，陳列著鐵劍、魔法杖，各種武器應有盡有。冒險者在這裡尋找力量的象徵。'],
            forest_0: ['<p>阿瑟穿越森林，樹影婆娑，神秘氛圍籠罩。他警惕地前行。</p>'],
            fight: ['你遇到了<span id="monster"></span>！']
        }

        const Opts = {
            start: {
                link: ['出發！'],
                id: ['start2']
            },
            start2: {
                link: ['走入街道'],
                id: ['street']
            },
            street: {
                link: ['森林', '商店'],
                id: ['forest_0', 'shop']
            },
            shop: {
                link: ['木劍｜10G｜+3攻擊力', '鐵劍｜30G｜+5攻擊力 ,', '返回街道'],
                id: ['woodSword', 'ironSword', 'street']
            },
            forest_0: {
                link: ['在附近繞繞', '深入｜離城鎮越遠、怪物越強', '回到街道'],
                id: ['forest_0', 'forest_1', 'street']
            },
            forest_1: {
                link: ['在附近繞繞', '深入｜離城鎮越遠、怪物越強', '往回走'],
                id: ['forest_1', 'forest_2', 'forest_0']
            },
            forest_2: {
                link: ['在附近繞繞', '深入｜離城鎮越遠、怪物越強', '往回走'],
                id: ['forest_2', 'forest_3', 'forest_1']
            },
            forest_3: {
                link: ['在附近繞繞', '深入｜離城鎮越遠、怪物越強', '往回走'],
                id: ['forest_3', 'forest_4', 'forest_2']
            },
            forest_4: {
                link: ['在附近繞繞', '討伐魔物首領', '往回走'],
                id: ['forest_4', 'Boss', 'forest_3']
            }
        }

        const item = {
            wornSword: {
                type: 'weapon',
                name: '破爛的劍',
                depiction: '這把劍曾經輝煌，但現在已經受損。雖然失去了一些光澤，但或許在冒險中仍能派上用場。',
                attack: '1',
            },
            woodSword: {
                type: 'weapon',
                name: '木劍',
                depiction: '簡單而輕巧的木劍，是初次冒險的選擇。雖然不及鐵劍堅固，但足以應對一些較弱的敵人。',
                attack: '3',
            },
            ironSword: {
                type: 'weapon',
                name: '木劍',
                depiction: '簡單而輕巧的木劍，是初次冒險的選擇。雖然不及鐵劍堅固，但足以應對一些較弱的敵人。',
                attack: '5',
            },
            slime: {
                type: 'food',
                name: '史萊姆黏液',
                depiction: '這份粘滑的物質來自史萊姆，具有神秘的魔法力量。你不知道它吃起來如何，恐怕你也不會想知道。',
            },
        }

        const skill = [
            {
                name: '重擊',
                attack: 2
            },
        ]

        var player = {
            attack: '',
            effect: '',
            weapon: '',
            skill: '',
            bag: '',
        }

        function into() {
            startShow()
            menuHide()
            contentHide()
            textShow()
            optsShow()
            fightTextHide()
            fightImgHide()
            fightOptsHide()
        }

        // 將選項加上id和Class
        for (let key in Opts) {
            let link = '';//檢視選項作弊用
            for (let i = 0; i < Opts[key].link.length; i++) {
                // console.log(Opts[key].link[i]);
                Opts[key].link[i] = `<span id="${Opts[key].id[i]}" class="link">(${i + 1}) ${Opts[key].link[i]}</span><br/>`
                link += Opts[key].link[i];
                // document.getElementById('test').innerHTML += `${key}BG_${i}<br/>`
            }
            document.getElementById('text').innerHTML += link;//檢視選項作弊用
        }

        // 初始化
        into()

        //  開始按鈕
        document.getElementById('startBnt').onclick = function () {
            // 隱藏開始畫面
            startHide();
            // 顯示菜單跟遊戲內容
            menuShow();
            contentShow();
            document.getElementById('text').innerHTML = Text.start;
            document.getElementById('opts').innerHTML = Opts.start.link;
            document.getElementById(`start2`).onclick = function () { textChange(this.id); }
        }

        function textChange(item) {
            document.getElementById('text').innerHTML = Text[item];
            // 重置選項
            document.getElementById('opts').innerHTML = '';
            // 建構頁面選項
            for (let i = 0; i < Opts[item].link.length; i++) {
                document.getElementById('opts').innerHTML += Opts[item].link[i];
            }

            // 點擊事件
            for (let i = 0; i < Opts[item].link.length; i++) {
                console.log(document.getElementById(`${Opts[item].id[i]}`))
                document.getElementById(`${Opts[item].id[i]}`).onclick = function () { textChange(this.id); }
            }
        }

        function optsChange(item) {

        }

        // 共用隱藏區
        function startShow() {
            document.getElementById('start').style.display = 'block';
        }
        function startHide() {
            document.getElementById('start').style.display = 'none';
        }
        console.log(document.getElementById('menu'));
        function menuShow() {
            document.getElementById('menu').style.display = 'block';
        }
        function menuHide() {
            document.getElementById('menu').style.display = 'none';
        }

        function contentShow() {
            document.getElementById('content').style.display = 'block';
        }
        function contentHide() {
            document.getElementById('content').style.display = 'none';
        }

        function textShow() {
            document.getElementById('text').style.display = 'block';
        }
        function textHide() {
            document.getElementById('text').style.display = 'none';
        }

        function optsShow() {
            document.getElementById('opts').style.display = 'block';
        }
        function optsHide() {
            document.getElementById('opts').style.display = 'none';
        }

        function fightTextShow() {
            document.getElementById('fightText').style.display = 'block';
        }
        function fightTextHide() {
            document.getElementById('fightText').style.display = 'none';
        }

        function fightImgShow() {
            document.getElementById('fightImg').style.display = 'block';
        }
        function fightImgHide() {
            document.getElementById('fightImg').style.display = 'none';
        }

        function fightOptsShow() {
            document.getElementById('fightOpts').style.display = 'block';
        }
        function fightOptsHide() {
            document.getElementById('fightOpts').style.display = 'none';
        }




        // 職業 初心者 戰士 法師
        // 基本功能：攻擊、防禦、技能、逃跑

        // 技能
        // 初：棍打
        // 戰士：斬擊、突進
        // 法師：火球、冰刃
        //



    </script>






</body>

</html>